!function(e){"function"==typeof define&&define.amd?define("cloudpaymentsConnectDashboard",e):e()}(function(){"use strict";window.render_cloudpayments_connect_dashboard=()=>{Array.from(document.querySelectorAll(".ts-vendor-settings")).forEach(e=>{var n;e.__vue_app__||((n=(e=>{let n=JSON.parse(e.closest(".elementor-element").querySelector(".vxconfig").innerHTML);return Vue.createApp({el:e,mixins:[Voxel.mixins.base],data(){return{screen:"main",activePopup:null,config:n,activeZone:null,savingShipping:!1}},mounted(){e.classList.remove("hidden")},methods:{getShippingCountries(e){if(!e._country_search?.trim().length)return this.config.shipping_countries;let i={},t=e._country_search.trim().toLowerCase();return Object.keys(this.config.shipping_countries).forEach(e=>{var n=this.config.shipping_countries[e];-1!==n.toLowerCase().indexOf(t)&&(i[e]=n)}),i},toggleShippingCountry(e,n){var i=e.countries.indexOf(n);if(-1!==i)e.countries.splice(i,1);else{e.countries.push(n);let i=this.config.shipping_countries;e.countries.sort((e,n)=>i[e]<i[n]?-1:i[e]>i[n]?1:0)}},isShippingCountrySelected(e,n){return-1!==e.countries.indexOf(n)},selectAllShippingCountries(e){e.countries.length===Object.keys(this.config.shipping_countries).length?e.countries=[]:e.countries=Object.keys(this.config.shipping_countries).map(e=>e)},getShippingCountriesLabel(e){return 3<=e.countries.length?this.config.l10n.countries_selected.replace("@count",e.countries.length):1<=e.countries.length&&(e=e.countries.map(e=>this.config.shipping_countries[e]||null).filter(Boolean)).length?e.join(", "):null},addShippingRate(e){e.rates.push(e._active_rate={key:Voxel.helpers.randomId(8),label:null,type:"free_shipping",free_shipping:{requirements:"none",minimum_order_amount:0,delivery_estimate:{enabled:!1,minimum:{unit:"business_day",value:1},maximum:{unit:"business_day",value:2}}},fixed_rate:{delivery_estimate:{enabled:!1,minimum:{unit:"business_day",value:1},maximum:{unit:"business_day",value:2}},amount_per_unit:0,shipping_classes:[]}})},saveShipping(){this.savingShipping=!0,jQuery.post(Voxel_Config.ajax_url+"&action=cloudpayments_connect.account.save_shipping",{shipping_details:JSON.stringify(this.config.zones),_wpnonce:this.config.nonce}).always(e=>{this.savingShipping=!1,e.success?Voxel.alert(e.message,"success",[],2e3):Voxel.alert(e.message||Voxel_Config.l10n.ajaxError,"error")})}},computed:{$w(){return window}}})})(e)).component("form-popup",Voxel.components.popup),n.component("form-group",Voxel.components.formGroup),n.mount(e))})},window.render_cloudpayments_connect_dashboard(),jQuery(document).on("voxel:markup-update",window.render_cloudpayments_connect_dashboard)});
