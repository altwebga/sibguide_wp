!function(t){"function"==typeof define&&define.amd?define("productForm",t):t()}(function(){"use strict";var t={template:"#product-form-switcher",props:{addon:Object,addons:Object},data(){return{value:this.$root.config.value.addons[this.addon.key]}},created(){this.addon.required&&(this.value.enabled=!0),!0===this.$root.config.settings.search_context.switcher_addons[this.addon.key]&&(this.value.enabled=!0)},methods:{getPricingSummary(){if(!this.value.enabled)return null;let t=this.addon.label;var e=this.addons.getRepeatConfig(this.addon),a=this.addons.getCustomPrice(this.addon);let i=0;if(null!==e){i=0;for(var s=new Date(e.start+"T00:00:00Z"),n=new Date(e.end+"T00:00:00Z");"nights"===e.count_mode?s<n:s<=n;){var o=this.$root.getCustomPriceForDate(s);null!==o?(o=o.prices.addons[this.addon.key].price,i+=null!=o?o:this.addon.props.price):i+=this.addon.props.price,s.setDate(s.getDate()+1)}t+=e.label}else i=null!==a&&(a=a.prices.addons[this.addon.key].price,null!=a)?a:this.addon.props.price;return{label:t,amount:i}}}},e={template:"#product-form-numeric",props:{addon:Object,addons:Object},data(){return{value:this.$root.config.value.addons[this.addon.key]}},created(){null===this.value.quantity&&(this.value.quantity=this.addon.required?this.addon.props.min_units:0);var t=this.$root.config.settings.search_context.numeric_addons[this.addon.key];void 0!==t&&"number"==typeof(t=parseInt(t,10))&&t>=this.addon.props.min_units&&t<=this.addon.props.max_units&&(this.value.quantity=t)},methods:{increment(){"number"!=typeof this.value.quantity||this.value.quantity+1<this.addon.props.min_units?this.value.quantity=this.addon.props.min_units:this.value.quantity=Math.min(this.value.quantity+1,this.addon.props.max_units)},decrement(){var t;"number"!=typeof this.value.quantity?this.value.quantity=this.addon.props.min_units:(t=this.value.quantity-1,!this.addon.required&&t<this.addon.props.min_units?this.value.quantity=0:this.value.quantity=Math.max(t,this.addon.props.min_units))},validateValueInBounds(){"number"==typeof this.value.quantity&&(this.value.quantity>this.addon.props.max_units?this.value.quantity=this.addon.props.max_units:this.value.quantity<this.addon.props.min_units&&(!this.addon.required&&0===this.value.quantity||(this.value.quantity=this.addon.props.min_units)))},getPricingSummary(){if(this.value.quantity<1)return null;let t=this.addon.label;1<=this.value.quantity&&(t+=" × "+this.value.quantity);var e=this.addons.getRepeatConfig(this.addon),a=this.addons.getCustomPrice(this.addon);let i=0;if(null!==e){i=0;for(var s=new Date(e.start+"T00:00:00Z"),n=new Date(e.end+"T00:00:00Z");"nights"===e.count_mode?s<n:s<=n;){var o=this.$root.getCustomPriceForDate(s);null!==o?(o=o.prices.addons[this.addon.key].price,i+=null!=o?o:this.addon.props.price):i+=this.addon.props.price,s.setDate(s.getDate()+1)}i*=this.value.quantity,t+=e.label}else i=null!==a&&(a=a.prices.addons[this.addon.key].price,null!=a)?a*this.value.quantity:this.addon.props.price*this.value.quantity;return{label:t,amount:i}}}},a={template:"#product-form-select",props:{addon:Object,addons:Object},data(){return{value:this.$root.config.value.addons[this.addon.key]}},created(){this.addon.required&&null===this.value.selected&&(this.value.selected=Object.keys(this.addon.props.choices)[0]||null)},methods:{getPricingSummary(){var t=this.value.selected;if(null===t)return null;var e=this.addon.props.choices[t];if(!e)return null;let a=e.label;var i=this.addons.getRepeatConfig(this.addon),s=this.addons.getCustomPrice(this.addon);let n=0;if(null!==i){n=0;for(var o=new Date(i.start+"T00:00:00Z"),r=new Date(i.end+"T00:00:00Z");"nights"===i.count_mode?o<r:o<=r;){var l=this.$root.getCustomPriceForDate(o);null!==l?(l=l.prices.addons[this.addon.key][t].price,n+=null!=l?l:e.price):n+=e.price,o.setDate(o.getDate()+1)}a+=i.label}else n=null!==s&&(s=s.prices.addons[this.addon.key][t].price,null!=s)?s:e.price;return{label:a,amount:n}}}},i={template:"#product-form-multiselect",props:{addon:Object,addons:Object},data(){return{value:this.$root.config.value.addons[this.addon.key]}},methods:{toggle(t){this.value.selected.includes(t.value)?this.value.selected.splice(this.value.selected.indexOf(t.value),1):this.value.selected.push(t.value)},getPricingSummary(){let l=[],d=this.addons.getRepeatConfig(this.addon),u=this.addons.getCustomPrice(this.addon);return this.value.selected.forEach(t=>{var e=t;if(null===e)return null;var a=this.addon.props.choices[e];if(!a)return null;let i=a.label,s=0;if(null!==d){s=0;for(var n=new Date(d.start+"T00:00:00Z"),o=new Date(d.end+"T00:00:00Z");"nights"===d.count_mode?n<o:n<=o;){var r=this.$root.getCustomPriceForDate(n);null!==r?(r=r.prices.addons[this.addon.key][e].price,s+=null!=r?r:a.price):s+=a.price,n.setDate(n.getDate()+1)}i+=d.label}else s=null!==u&&(t=u.prices.addons[this.addon.key][e].price,null!=t)?t:a.price;l.push({label:i,amount:s})}),l}}},s={template:"#product-form-custom-select",props:{addon:Object,addons:Object},data(){return{value:this.$root.config.value.addons[this.addon.key]}},created(){var t;this.addon.required&&null===this.value.selected.item&&(t=Object.values(this.addon.props.choices)[0],this.value.selected.item=t.value,t.quantity.enabled?this.value.selected.quantity=t.quantity.min:this.value.selected.quantity=1)},methods:{shouldShowAddon(){return!this.addon._has_external_handler||null!==this.value.selected.item},shouldShowChoice(t){return!this.addon._has_external_handler||this.value.selected.item===t.value},toggleChoice(t){t&&this.value.selected.item!==t.value?(this.value.selected.item=t.value,t.quantity.enabled?this.value.selected.quantity=t.quantity.min:this.value.selected.quantity=1):this.value.selected.item=null},validateQuantity(t){"number"==typeof this.value.selected.quantity&&(this.value.selected.quantity>t.quantity.max?this.value.selected.quantity=t.quantity.max:this.value.selected.quantity<t.quantity.min&&(this.value.selected.quantity=t.quantity.min))},incrementQuantity(t){var e;"number"!=typeof this.value.selected.quantity||(e=this.value.selected.quantity+1)<t.quantity.min?this.value.selected.quantity=t.quantity.min:this.value.selected.quantity=Math.min(e,t.quantity.max)},decrementQuantity(t){"number"!=typeof this.value.selected.quantity?this.value.selected.quantity=t.quantity.min:this.value.selected.quantity=Math.max(this.value.selected.quantity-1,t.quantity.min)},getPricingSummary(){var{item:t,quantity:e}=this.value.selected;if(null===t)return null;var a=this.addon.props.choices[t];if(!a)return null;let i=a.label;a.quantity.enabled&&1<=e&&(i+=" × "+e);var s=this.addons.getRepeatConfig(this.addon),n=this.addons.getCustomPrice(this.addon);let o=0;if(null!==s){o=0;for(var r=new Date(s.start+"T00:00:00Z"),l=new Date(s.end+"T00:00:00Z");"nights"===s.count_mode?r<l:r<=l;){var d=this.$root.getCustomPriceForDate(r);null!==d?(d=d.prices.addons[this.addon.key][t].price,o+=null!=d?d:a.price):o+=a.price,r.setDate(r.getDate()+1)}a.quantity.enabled&&(o*=e),i+=s.label}else o=null!==n&&(n=n.prices.addons[this.addon.key][t].price,null!=n)?n:a.price,a.quantity.enabled&&(o*=e);return{label:i,amount:o}}}},n={template:"#product-form-custom-multiselect",props:{addon:Object,addons:Object},data(){return{value:this.$root.config.value.addons[this.addon.key]}},methods:{shouldShowAddon(){return!this.addon._has_external_handler||!!this.value.selected.length},shouldShowChoice(t){return!this.addon._has_external_handler||this.isChecked(t)},getSelectionIndex(e){return this.value.selected.findIndex(t=>t.item===e.value)},isChecked(t){return-1!==this.getSelectionIndex(t)},toggleChoice(t){var e=this.getSelectionIndex(t);-1!==e?this.value.selected.splice(e,1):this.value.selected.push({item:t.value,quantity:t.quantity.min})},validateQuantity(t){var e=this.getSelectionIndex(t);"number"==typeof this.value.selected[e].quantity&&(this.value.selected[e].quantity>t.quantity.max?this.value.selected[e].quantity=t.quantity.max:this.value.selected[e].quantity<t.quantity.min&&(this.value.selected[e].quantity=t.quantity.min))},incrementQuantity(t){var e,a=this.getSelectionIndex(t);"number"!=typeof this.value.selected[a].quantity||(e=this.value.selected[a].quantity+1)<t.quantity.min?this.value.selected[a].quantity=t.quantity.min:this.value.selected[a].quantity=Math.min(e,t.quantity.max)},decrementQuantity(t){var e=this.getSelectionIndex(t);"number"!=typeof this.value.selected[e].quantity?this.value.selected[e].quantity=t.quantity.min:this.value.selected[e].quantity=Math.max(this.value.selected[e].quantity-1,t.quantity.min)},getPricingSummary(){let d=[],u=this.addons.getRepeatConfig(this.addon),h=this.addons.getCustomPrice(this.addon);return this.value.selected.forEach(t=>{var{item:e,quantity:t}=t;if(null===e)return null;var a,i=this.addon.props.choices[e];if(!i)return null;let s=i.label,n=(i.quantity.enabled&&1<=t&&(s+=" × "+t),0);if(null!==u){n=0;for(var o=new Date(u.start+"T00:00:00Z"),r=new Date(u.end+"T00:00:00Z");"nights"===u.count_mode?o<r:o<=r;){var l=this.$root.getCustomPriceForDate(o);null!==l?(l=l.prices.addons[this.addon.key][e].price,n+=null!=l?l:i.price):n+=i.price,o.setDate(o.getDate()+1)}i.quantity.enabled&&(n*=t),s+=u.label}else n=null!==h&&(a=h.prices.addons[this.addon.key][e].price,null!=a)?a:i.price,i.quantity.enabled&&(n*=t);d.push({label:s,amount:n})}),d}}},o={template:"#product-form-addons",props:{field:Object},components:{addonSwitcher:t,addonNumeric:e,addonSelect:a,addonMultiselect:i,addonCustomSelect:s,addonCustomMultiselect:n,externalChoice:{template:"#product-form-external-choice",data(){return{data:this.$root.externalChoice}},methods:{onClear(){var t;"custom-select"===this.data.ref.addon.type?this.data.ref.value.selected.item=null:-1!==(t=this.data.ref.getSelectionIndex(this.data.choice))&&this.data.ref.value.selected.splice(t,1)}}}},data(){return{}},methods:{getPricingSummary(){let e=[];return Object.values(this.field.props.addons).forEach(t=>{t=this.$refs["addon:"+t.key][0].getPricingSummary();null!==t&&(Array.isArray(t)?e=e.concat(t):e.push(t))}),e},getCustomPrice(t){var e,a=this.$root.config.settings.product_mode;return"booking"===a?(e=this.$root.config.props.fields["form-booking"])&&["single_day","timeslots"].includes(e.props.mode)&&(e=this.$root.config.value.booking).date?this.$root.getCustomPriceForDate(new Date(e.date+"T00:00:00Z")):null:"regular"===a?(e=this.$root.config.props.today.date,this.$root.getCustomPriceForDate(new Date(e+"T00:00:00Z"))):null},getRepeatConfig(t){var e,a=this.$root.config.props.fields["form-booking"];return!a||"date_range"!==a.props.mode||!t.repeat||!(t=this.$root.config.value.booking).start_date||!t.end_date||(e=(t=this.$root.$refs["field:form-booking"][0]).$refs.dateRange.getSelectedRangeLength())<1?null:(a=a.props.count_mode,{length:e,label:1<e?"nights"===a?` (${this.field.props.l10n.amount_nights.replace("@count",e)})`:` (${this.field.props.l10n.amount_days.replace("@count",e)})`:"",start:t.value.start_date,end:t.value.end_date,count_mode:a})},getPriceForChoice(t,e){var a=this.getRepeatConfig(t),i=this.getCustomPrice(t);if(null===a)return null!==i&&null!=(i=i.prices.addons[t.key][e.value].price)?this.$root.currencyFormat(i):this.$root.currencyFormat(e.price);for(var s=new Date(a.start+"T00:00:00Z"),n=new Date(a.end+"T00:00:00Z"),o=[];"nights"===a.count_mode?s<n:s<=n;){var r=this.$root.getCustomPriceForDate(s);null!==r?(r=r.prices.addons[t.key][e.value].price,o.push(null!=r?r:e.price)):o.push(e.price),s.setDate(s.getDate()+1)}var i=Math.min(...o),l=Math.max(...o);return i===l?this.$root.currencyFormat(i):this.$root.currencyFormat(i)+" - "+this.$root.currencyFormat(l)}}},r={template:"#product-form-quantity",props:{field:Object},data(){return{value:this.$root.config.value.stock}},methods:{increment(){var t;"number"!=typeof this.value.quantity?this.value.quantity=1:(t=this.value.quantity+1,this.value.quantity=t<1?1:Math.min(this.value.quantity+1,this.field.props.quantity))},decrement(){"number"!=typeof this.value.quantity?this.value.quantity=1:this.value.quantity=Math.max(this.value.quantity-1,1)},validateValueInBounds(){"number"==typeof this.value.quantity&&(this.value.quantity>this.field.props.quantity?this.value.quantity=this.field.props.quantity:this.value.quantity<1&&(this.value.quantity=1))}}},t={template:"#product-form-attribute",props:{attribute:Object,variations:Object},data(){return{}},methods:{selectChoice(t){this.variations.setAttribute(this.attribute.key,t.value)},isSelected(t){return this.variations.selections[this.attribute.key]===t.value},getAvailableVariations(){let a=Object.values(this.variations.field.props.attributes);return Object.values(this.variations.field.props.variations).filter(t=>{for(var e of a){if(e.key===this.attribute.key)break;if(this.variations.field.props.selections[e.key]!==t.attributes[e.key])return!1}return!0})},getActiveChoices(){let t=this.getAvailableVariations();return Object.values(this.attribute.props.choices).filter(e=>t.find(t=>t.attributes[this.attribute.key]===e.value))},getChoiceStatus(e){var t=this.getAvailableVariations().filter(t=>t.attributes[this.attribute.key]===e.value);return t.length?!this.variations.field.props.stock.enabled||t.find(t=>"active"===t._status)?"active":"out_of_stock":"inactive"}},computed:{selectionLabel(){return this.attribute.props.choices["choice_"+this.variations.selections[this.attribute.key]].label}}},l={template:"#product-form-variations",props:{field:Object},components:{variationAttribute:t},data(){return{selections:this.field.props.selections,value:this.$root.config.value.variations}},created(){this.setDefaultSelection()},methods:{setDefaultSelection(){for(let e of Object.values(this.field.props.variations))if("active"===e._status){Object.keys(this.selections).forEach(t=>{this.selections[t]=e.attributes[t]});break}this.validateSelection()},setAttribute(t,e){this.selections[t]=e,this.validateSelection()},validateSelection(){var t,a=null,i=Object.values(this.field.props.variations).filter(t=>"active"===t._status);for(let e of Object.keys(this.selections)){var s=i.filter(t=>t.attributes[e]===this.selections[e]);if(!s.length){let e=i[0];Object.keys(this.selections).forEach(t=>{this.selections[t]=e.attributes[t]}),a=e;break}a=(i=s)[0]}this.value.variation_id=a.id,this.validateQuantity(),this.currentVariation.image&&(t=document.getElementById("ts-media-"+this.currentVariation.image.id))&&(t.parentElement.scrollLeft=t.offsetLeft)},validateQuantity(){this.field.props.stock.enabled&&this.currentVariation.config.stock.enabled&&!this.currentVariation.config.stock.sold_individually?this.validateQuantityInBounds():this.value.quantity=1},getPricingSummary(){var t=this.currentVariation.config.base_price;let e=null!==t.discount_amount&&void 0!==t.discount_amount?t.discount_amount:t.amount,a=null,i=(this.field.props.stock.enabled&&this.currentVariation.config.stock.enabled&&!this.currentVariation.config.stock.sold_individually&&(this.validateQuantity(),a=this.value.quantity,e*=this.value.quantity),[]);return Object.keys(this.currentVariation.attributes).forEach(t=>{i.push(this.field.props.attributes[t].props.choices["choice_"+this.currentVariation.attributes[t]].label)}),{label:i.join(" / "),amount:e,quantity:a}},incrementQuantity(){var t;"number"!=typeof this.value.quantity?this.value.quantity=1:(t=this.value.quantity+1,this.value.quantity=t<1?1:Math.min(this.value.quantity+1,this.currentVariation.config.stock.quantity))},decrementQuantity(){"number"!=typeof this.value.quantity?this.value.quantity=1:this.value.quantity=Math.max(this.value.quantity-1,1)},validateQuantityInBounds(){"number"==typeof this.value.quantity&&(this.value.quantity>this.currentVariation.config.stock.quantity?this.value.quantity=this.currentVariation.config.stock.quantity:this.value.quantity<1&&(this.value.quantity=1))}},computed:{currentVariation(){return this.field.props.variations[this.value.variation_id]}}},e={template:"#product-form-book-date-range",props:{booking:Object,field:Object},data(){return{picker:null,active_picker:"start",start_date:null,end_date:null,hover_date:null}},mounted(){this._setValuesFromSearchContext()},methods:{_setValuesFromSearchContext(){var e=this.$root.config.settings.search_context.availability;if(e.start&&e.end){var a=new Date(e.start+" 00:00:00"),i=new Date(e.end+" 00:00:00");if(!(i<a||a<this.booking.getMinDate()||i>this.booking.getMaxDate())){var s=this.field.props.date_range,n=this.field.props.count_mode,o=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),r=Date.UTC(i.getFullYear(),i.getMonth(),i.getDate());let t=Math.abs(Math.floor((r-o)/this.booking.DAY_IN_MS))+1;if(!((t="nights"===n?Math.max(1,Math.abs(Math.floor((r-o)/this.booking.DAY_IN_MS))):t)<s.min_length||t>s.max_length)){var l=new Date(a.getTime());if(l<=i)for(;"nights"===n?l<i:l<=i;){if(this.booking.isDateExcluded(l))return;if(this.booking.isWeekdayExcluded(l))return;l.setTime(l.getTime()+this.booking.DAY_IN_MS)}this.start_date=a,this.end_date=i,this.booking.value.start_date=e.start,this.booking.value.end_date=e.end}}}},onOpen(){this.picker&&(this.picker.el.removeEventListener("mouseover",this.onCalendarMouseOver),this.picker.destroy()),this.$nextTick(()=>this.renderPicker())},saveDates(){var t;this.start_date?(this.end_date||(this.end_date=this.start_date),this.booking.value.start_date=Voxel.helpers.dateFormatYmd(this.start_date),this.booking.value.end_date=Voxel.helpers.dateFormatYmd(this.end_date),this.booking.value.start_date===this.booking.value.end_date&&("nights"===this.field.props.count_mode?((t=new Date(this.start_date.getTime())).setTime(t.getTime()+this.field.props.date_range.min_length*this.booking.DAY_IN_MS),this.booking.value.end_date=Voxel.helpers.dateFormatYmd(t),this.end_date=t):((t=new Date(this.start_date.getTime())).setTime(t.getTime()+this.field.props.date_range.min_length*this.booking.DAY_IN_MS-this.booking.DAY_IN_MS),this.booking.value.end_date=Voxel.helpers.dateFormatYmd(t),this.end_date=t))):(this.booking.value.start_date=null,this.booking.value.end_date=null)},displayDates(){return[Voxel.helpers.dateFormat(new Date(this.booking.value.start_date+"T00:00:00")),Voxel.helpers.dateFormat(new Date(this.booking.value.end_date+"T00:00:00"))].join(" - ")},onSave(){this.saveDates(),this.$refs.booking.blur(),this.active_picker="start"},onBlur(){this.saveDates(),this.active_picker="start"},onClear(){this.setStartDate(null),this.setEndDate(null),this.picker.draw(),this.active_picker="start"},renderPicker(){this.picker=new Pikaday({field:this.$refs.input,container:this.$refs.calendar,bound:!1,firstDay:1,keyboardInput:!1,numberOfMonths:2,defaultDate:this.start_date,minDate:this.booking.getMinDate(),maxDate:this.booking.getMaxDate(),startRange:this.start_date,endRange:this.end_date,expandYears:!1,onSelect:t=>{("start"!==this.active_picker||(this.setStartDate(t),this.active_picker="end",this.field.props.date_range.min_length<2&&!this.booking.isDateAvailable(new Date(t.getTime()+this.booking.DAY_IN_MS))))&&(this.end_date=t,this.active_picker="start",this.onSave())},selectDayFn:t=>!(!this.start_date||t.toDateString()!==this.start_date.toDateString())||!(!this.end_date||t.toDateString()!==this.end_date.toDateString())||void 0,disableDayFn:t=>{if(this.field.props.availability.max_days<1)return!0;if("end"===this.active_picker&&this.start_date&&t<this.start_date)return!0;if(this.booking.isWeekdayExcluded(t))return!0;if("end"===this.active_picker&&this.start_date){var e=this.field.props.date_range,a=new Date(this.start_date.getTime()+e.min_length*this.booking.DAY_IN_MS),e=new Date(this.start_date.getTime()+e.max_length*this.booking.DAY_IN_MS);if("days"===this.field.props.count_mode&&(a.setTime(a.getTime()-this.booking.DAY_IN_MS),e.setTime(e.getTime()-this.booking.DAY_IN_MS)),t<a||e<t)return!0;var i=new Date(this.start_date.getTime());if(i<=t)for(;i<=t;){if(this.booking.isDateExcluded(i))return!0;if(this.booking.isWeekdayExcluded(i))return!0;i.setTime(i.getTime()+this.booking.DAY_IN_MS)}}if("start"===this.active_picker&&!this.booking.isDateExcluded(t)){var a=this.field.props.date_range,s=new Date(t.getTime()+a.min_length*this.booking.DAY_IN_MS),n=new Date(t.getTime()+a.max_length*this.booking.DAY_IN_MS);if("days"===this.field.props.count_mode&&(s.setTime(s.getTime()-this.booking.DAY_IN_MS),n.setTime(n.getTime()-this.booking.DAY_IN_MS)),s>this.booking.getMaxDate())return!0;var o=new Date(t.getTime());if(o<=n)for(;o<=n;){if(this.booking.isDateExcluded(o))return!0;if(this.booking.isWeekdayExcluded(o))return!0;if(s<=o)break;o.setTime(o.getTime()+this.booking.DAY_IN_MS)}}},unavailableDayFn:t=>{if(this.booking.isDateExcluded(t))return!0},customClassesFn:t=>{if("end"===this.active_picker&&this.start_date){var e=this.field.props.date_range,e=new Date(this.start_date.getTime()+e.min_length*this.booking.DAY_IN_MS);if("days"===this.field.props.count_mode&&e.setTime(e.getTime()-this.booking.DAY_IN_MS),t>this.start_date&&t<e)return["is-inrange"]}},onDraw:t=>t.el.addEventListener("mouseover",this.onCalendarMouseOver),dayRenderHook:(t,e)=>{t.isDisabled||(t=new Date(t.year,t.month,t.day),t=this.$root.getMinimumPriceForDate(t),t=`<div class="pika-tooltip">${this.$root.currencyFormat(t)}</div>`,e.beforeCloseTd+=t)}})},onCalendarMouseOver(e){if(this.start_date&&!this.end_date){let t="TD"===e.target.tagName?e.target:e.target.closest("td");if(t&&!t.classList.contains("is-empty")&&!t.classList.contains("is-disabled")){e=t.querySelector(".pika-button");if(e&&!e.disabled){t.classList.add("is-endrange");var a=new Date(e.getAttribute("data-pika-year"),e.getAttribute("data-pika-month"),e.getAttribute("data-pika-day"));if(this.hover_date=new Date(a.getTime()),a.setTime(a.getTime()-this.booking.DAY_IN_MS),a>this.start_date)for(;a>this.start_date;)this.picker.el.querySelector([`.pika-button[data-pika-year="${a.getFullYear()}"]`,`[data-pika-month="${a.getMonth()}"]`,`[data-pika-day="${a.getDate()}"]`].join(""))?.parentElement.classList.add("is-inrange"),a.setTime(a.getTime()-this.booking.DAY_IN_MS);t.addEventListener("mouseleave",()=>{Array.from(this.picker.el.querySelectorAll("td.is-inrange:not(.is-disabled)")).forEach(t=>t.classList.remove("is-inrange")),t.classList.remove("is-endrange"),this.hover_date=null},{once:!0})}}}},setStartDate(t){this.start_date=t,this.hover_date=null,this.picker.setStartRange(t),this.setEndDate(null)},setEndDate(t){this.end_date=t,this.picker.setEndRange(t)},getSelectedRangeLength(){var t=new Date(this.booking.value.start_date+"T00:00:00Z"),e=new Date(this.booking.value.end_date+"T00:00:00Z"),t=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return"nights"===this.field.props.count_mode?Math.max(1,Math.abs(Math.floor((e-t)/this.booking.DAY_IN_MS))):Math.abs(Math.floor((e-t)/this.booking.DAY_IN_MS))+1},calculateLength(t,e,a=this.field.props.count_mode){t=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate()),e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return"nights"===a?Math.max(1,Math.abs(Math.floor((e-t)/this.booking.DAY_IN_MS))):Math.abs(Math.floor((e-t)/this.booking.DAY_IN_MS))+1}},computed:{popupTitle(){var t;return"nights"===this.field.props.count_mode?this.start_date&&this.end_date?1===(t=this.calculateLength(this.start_date,this.end_date))?this.field.props.l10n.one_night:this.field.props.l10n.multiple_nights.replace("@count",t):this.start_date&&this.hover_date?1===(t=this.calculateLength(this.start_date,this.hover_date))?this.field.props.l10n.one_night:this.field.props.l10n.multiple_nights.replace("@count",t):this.field.props.l10n.select_nights:this.start_date&&this.end_date?1===(t=this.calculateLength(this.start_date,this.end_date))?this.field.props.l10n.one_day:this.field.props.l10n.multiple_days.replace("@count",t):this.start_date&&this.hover_date?1===(t=this.calculateLength(this.start_date,this.hover_date))?this.field.props.l10n.one_day:this.field.props.l10n.multiple_days.replace("@count",t):this.field.props.l10n.select_days},popupDescription(){return this.start_date&&this.end_date?[Voxel.helpers.dateFormat(this.start_date),Voxel.helpers.dateFormat(this.end_date)].join(" - "):this.start_date&&this.hover_date?[Voxel.helpers.dateFormat(this.start_date),Voxel.helpers.dateFormat(this.hover_date)].join(" - "):this.start_date?Voxel.helpers.dateFormat(this.start_date)+" - "+this.field.props.l10n.select_end_date:this.field.props.date_range.has_custom_limits?("nights"===this.field.props.count_mode?this.field.props.l10n.nights_range_error:this.field.props.l10n.days_range_error).replace("@minlength",this.field.props.date_range.min_length).replace("@maxlength",this.field.props.date_range.max_length):this.field.props.l10n.select_start_and_end_date}}},a={template:"#product-form-book-single-day",props:{booking:Object,field:Object},data(){return{date:null,picker:null}},mounted(){this._setValuesFromSearchContext()},methods:{_setValuesFromSearchContext(){var t,e=this.$root.config.settings.search_context.availability;!e.start||(t=new Date(e.start+" 00:00:00"))<this.booking.getMinDate()||t>this.booking.getMaxDate()||this.booking.isDateExcluded(t)||this.booking.isWeekdayExcluded(t)||(this.date=t,this.booking.value.date=e.start)},onOpen(){this.picker?.destroy(),this.$nextTick(()=>this.renderPicker())},saveDate(){this.booking.value.date=this.date?Voxel.helpers.dateFormatYmd(this.date):null},displayDate(){return Voxel.helpers.dateFormat(new Date(this.booking.value.date+"T00:00:00"))},onSave(){this.saveDate(),this.$refs.booking.blur()},onBlur(){this.saveDate()},onClear(){this.date=null,this.picker.draw()},renderPicker(){this.picker=new Pikaday({field:this.$refs.input,container:this.$refs.calendar,bound:!1,firstDay:1,keyboardInput:!1,numberOfMonths:1,defaultDate:this.date,minDate:this.booking.getMinDate(),maxDate:this.booking.getMaxDate(),expandYears:!1,onSelect:t=>{this.date=t,this.onSave()},selectDayFn:t=>this.date&&this.date.toDateString()===t.toDateString(),disableDayFn:t=>{return this.field.props.availability.max_days<1||(t=this.booking.weekdays[t.getDay()],!!this.field.props.excluded_weekdays.includes(t))||void 0},unavailableDayFn:t=>{if(this.field.props.excluded_days.includes(Voxel.helpers.dateFormatYmd(t)))return!0}})}}},i={template:"#product-form-book-timeslot",props:{booking:Object,field:Object},data(){return{date:null,slot:null,picker:null,schedule:{}}},created(){this.field.props.timeslots.groups.forEach(e=>{e.days.forEach(t=>{this.schedule[t]=e.slots})})},mounted(){this._setValuesFromSearchContext()},methods:{_setValuesFromSearchContext(){var t,e,a=this.$root.config.settings.search_context.availability;!a.start||(t=new Date(a.start+" 00:00:00"))<this.booking.getMinDate()||t>this.booking.getMaxDate()||this.booking.isDateExcluded(t)||this.booking.isWeekdayExcluded(t)||(e=this.getSlotsForDate(t).find(t=>!0!==t._disabled))&&(this.date=t,this.slot={from:e.from,to:e.to},this.booking.value.date=a.start,this.booking.value.slot=this.slot)},showCalendar(){let t=this.date;this.date=null,this.picker?.destroy(),this.$nextTick(()=>{this.renderPicker(),this.picker.gotoDate(t)})},onOpen(){this.picker?.destroy(),this.$nextTick(()=>this.renderPicker())},saveDate(){this.date&&this.slot?(this.booking.value.date=Voxel.helpers.dateFormatYmd(this.date),this.booking.value.slot=this.slot):(this.booking.value.date=null,this.booking.value.slot=null)},displayDate(){return Voxel.helpers.dateTimeFormat(new Date(this.booking.value.date+"T"+this.booking.value.slot.from))},onSave(){this.saveDate(),this.$refs.booking.blur()},onBlur(){this.saveDate()},onClear(){this.date=null,this.slot=null,this.showCalendar()},renderPicker(){this.picker=new Pikaday({field:this.$refs.input,container:this.$refs.calendar,bound:!1,firstDay:1,keyboardInput:!1,numberOfMonths:1,defaultDate:this.date,minDate:this.booking.getMinDate(),maxDate:this.booking.getMaxDate(),expandYears:!1,onSelect:t=>{this.date=t},selectDayFn:t=>this.date&&this.date.toDateString()===t.toDateString(),disableDayFn:t=>{return this.field.props.availability.max_days<1||(t=this.schedule[this.booking.weekdays[t.getDay()]],!Array.isArray(t))||!t.length||void 0},unavailableDayFn:t=>{if(this.field.props.excluded_days.includes(Voxel.helpers.dateFormatYmd(t)))return!0},dayRenderHook:(t,n)=>{if(!t.isDisabled){let e=new Date(t.year,t.month,t.day);t=this.schedule[this.booking.weekdays[e.getDay()]];t.length,this.field.props.quantity_per_slot;let a=this.booking.field.props.quantity_per_slot,i=this.booking.field.props.booked_slot_counts,s=0;t.forEach(t=>{t=`${Voxel.helpers.dateFormatYmd(e)} ${t.from}-`+t.to,t=a-(i[t]||0);1<=t&&(s+=t)});t=`<div class="pika-tooltip">${this.booking.field.props.l10n.amount_available.replace("@count",s)}</div>`;n.beforeCloseTd+=t}}})},pickSlot(t){this.slot={from:t.from,to:t.to},this.onSave()},getSlotLabel(t){return Voxel.helpers.timeFormat(new Date(`2020-01-01T${t.from}:00`))+" - "+Voxel.helpers.timeFormat(new Date(`2020-01-01T${t.to}:00`))},getSlotsForDate(a){var t=this.schedule[this.booking.weekdays[a.getDay()]];if(Voxel.helpers.dateFormatYmd(a)===Voxel.helpers.dateFormatYmd(this.booking.today)){var e=this.booking.today;let a=parseInt(""+e.getUTCHours()+e.getUTCMinutes(),10);t.forEach(t=>{var e=t.from.split(":"),e=parseInt(""+e[0]+e[1],10);t._disabled=e<a})}let i=this.booking.field.props.quantity_per_slot,s=this.booking.field.props.booked_slot_counts;return t.forEach(t=>{var e=`${Voxel.helpers.dateFormatYmd(a)} ${t.from}-`+t.to;i-(s[e]||0)<1&&(t._disabled=!0)}),t}},computed:{currentDaySlots(){if(!this.date)return[];var t=this.schedule[this.booking.weekdays[this.date.getDay()]];if(t.forEach(t=>t._disabled=!1),Voxel.helpers.dateFormatYmd(this.date)===Voxel.helpers.dateFormatYmd(this.booking.today)){var e=new Date(this.booking.today.getTime()+this.booking.getBufferTime());let a=parseInt(""+e.getUTCHours()+e.getUTCMinutes(),10);t.forEach(t=>{var e=t.from.split(":"),e=parseInt(""+e[0]+e[1],10);t._disabled=e<a})}let a=this.booking.field.props.quantity_per_slot,i=this.booking.field.props.booked_slot_counts;return t.forEach(t=>{var e=`${Voxel.helpers.dateFormatYmd(this.date)} ${t.from}-`+t.to;a-(i[e]||0)<1&&(t._disabled=!0)}),t}}},d={template:"#product-form-booking",props:{field:Object},components:{bookDateRange:e,bookSingleDay:a,bookTimeslot:i},data(){return{value:this.$root.config.value.booking,weekdays:["sun","mon","tue","wed","thu","fri","sat"],today:new Date(this.field.props.today.date+"T"+this.field.props.today.time+"Z"),HOUR_IN_MS:36e5,DAY_IN_MS:864e5,_excluded_days_map:{},_excluded_weekdays_map:{},_minDate:null,_maxDate:null}},created(){this.field.props.excluded_days.forEach(t=>this._excluded_days_map[t]=!0),this.field.props.excluded_weekdays?.forEach(t=>this._excluded_weekdays_map[t]=!0)},methods:{getBufferTime(){var t=this.field.props.availability.buffer;return"hours"===t.unit?t.amount*this.HOUR_IN_MS:t.amount*this.DAY_IN_MS},getMinDate(){var t;return null===this._minDate&&((t=new Date(this.today.getTime()+this.getBufferTime())).setHours(0,0,0,0),this._minDate=t),this._minDate},getMaxDate(){if(null===this._maxDate){var e=this.getMinDate();let t=new Date(this.today.getTime()+(this.field.props.availability.max_days-1)*this.DAY_IN_MS);t.setHours(0,0,0,0),e>t&&(t=e),this._maxDate=t}return this._maxDate},isDateExcluded(t){return!0===this._excluded_days_map[Voxel.helpers.dateFormatYmd(t)]},isWeekdayExcluded(t){t=this.weekdays[t.getDay()];return!0===this._excluded_weekdays_map[t]},isDateAvailable(t){return!this.isWeekdayExcluded(t)&&!this.isDateExcluded(t)&&!(t<this.getMinDate()||t>this.getMaxDate())},dateFormat(t){return Voxel.helpers.dateFormat(t)},getPricingSummary(){if("date_range"===this.field.props.mode){if(!this.value.start_date||!this.value.end_date)return null;var a=this.field.props.count_mode,i=this.$refs.dateRange.getSelectedRangeLength();if(i<1)return null;var s=this.$root.config.props.base_price;let t=0;if(s.enabled)for(var n=new Date(this.value.start_date+"T00:00:00Z"),o=new Date(this.value.end_date+"T00:00:00Z");"nights"===a?n<o:n<=o;){var r=this.$root.getCustomPriceForDate(n);t+=r?null!==r.prices.base_price.discount_amount?r.prices.base_price.discount_amount:r.prices.base_price.amount:null!==s.discount_amount?s.discount_amount:s.amount,n.setDate(n.getDate()+1)}let e;return{label:e="nights"===a?1===i?this.field.props.l10n.one_night:this.field.props.l10n.multiple_nights.replace("@count",i):1===i?this.field.props.l10n.one_day:this.field.props.l10n.multiple_days.replace("@count",i),amount:t}}if("single_day"===this.field.props.mode){if(!this.value.date)return null;i=this.$root.config.props.base_price;let t=0;return i.enabled&&(e=new Date(this.value.date+"T00:00:00Z"),e=this.$root.getCustomPriceForDate(e),t+=e?null!==e.prices.base_price.discount_amount?e.prices.base_price.discount_amount:e.prices.base_price.amount:null!==i.discount_amount?i.discount_amount:i.amount),{amount:t,label:this.field.props.l10n.booking_price}}if("timeslots"!==this.field.props.mode)return null;{if(!this.value.date||!this.value.slot)return null;var e=this.$root.config.props.base_price;let t=0;return e.enabled&&(i=new Date(this.value.date+"T00:00:00Z"),i=this.$root.getCustomPriceForDate(i),t+=i?null!==i.prices.base_price.discount_amount?i.prices.base_price.discount_amount:i.prices.base_price.amount:null!==e.discount_amount?e.discount_amount:e.amount),{amount:t,label:this.field.props.l10n.booking_price}}}}},u={template:"#product-form-data-inputs",props:{field:Object},components:{dataInputText:{template:"#product-form-data-input-text",props:{dataInput:Object,dataInputs:Object}},dataInputTextarea:{template:"#product-form-data-input-textarea",props:{dataInput:Object,dataInputs:Object}},dataInputNumber:{template:"#product-form-data-input-number",props:{dataInput:Object,dataInputs:Object},methods:{setValue(t){this.dataInputs.values[this.dataInput.key]=t},validateValueInBounds(){var t=this.dataInputs.values[this.dataInput.key],e=this.dataInput.props;"number"==typeof t&&(t>e.max?this.setValue(e.max):t<e.min&&this.setValue(e.min))},increment(){"number"!=typeof this.dataInputs.values[this.dataInput.key]?this.setValue(this.dataInput.props.min):this.setValue(this.dataInputs.values[this.dataInput.key]+1)},decrement(){"number"!=typeof this.dataInputs.values[this.dataInput.key]?this.setValue(this.dataInput.props.min):this.setValue(this.dataInputs.values[this.dataInput.key]-1)}}},dataInputSelect:{template:"#product-form-data-input-select",props:{dataInput:Object,dataInputs:Object},methods:{isChecked(t){return this.dataInputs.values[this.dataInput.key]===t.value},toggleChoice(t){this.isChecked(t)?this.dataInputs.values[this.dataInput.key]=null:this.dataInputs.values[this.dataInput.key]=t.value}}},dataInputMultiselect:{template:"#product-form-data-input-multiselect",props:{dataInput:Object,dataInputs:Object},methods:{isChecked(t){return this.dataInputs.values[this.dataInput.key].includes(t.value)},toggleChoice(e){this.isChecked(e)?this.dataInputs.values[this.dataInput.key]=this.dataInputs.values[this.dataInput.key].filter(t=>t!==e.value):this.dataInputs.values[this.dataInput.key].push(e.value)}}},dataInputEmail:{template:"#product-form-data-input-email",props:{dataInput:Object,dataInputs:Object}},dataInputPhone:{template:"#product-form-data-input-phone",props:{dataInput:Object,dataInputs:Object}},dataInputUrl:{template:"#product-form-data-input-url",props:{dataInput:Object,dataInputs:Object}},dataInputSwitcher:{template:"#product-form-data-input-switcher",props:{dataInput:Object,dataInputs:Object}},dataInputDate:{template:"#product-form-data-input-date",props:{dataInput:Object,dataInputs:Object}}},data(){return{values:this.$root.config.value.data_inputs}},methods:{}};window.render_product_form=()=>{Array.from(document.querySelectorAll(".ts-product-form .ts-product-main:not(.vx-loading-screen)")).forEach(t=>{var e,i,a;t.__vue_app__||(e=JSON.parse(t.closest(".elementor-element").querySelector(".vxconfig").innerHTML),i=t,a=e,(e=Vue.createApp({el:i,mixins:[Voxel.mixins.base],data(){return{config:a,activePopup:null,pricing_summary:{items:[],visible_items:[],total_amount:null},processing:!1,externalChoice:{active:!1,el:null,choice:null,ref:null}}},created(){this._setSearchContext()},mounted(){(window.VX_Product_Form=this).runLoadingAnimation(),this.updatePricingSummary(),this.$watch(()=>this.config.value,()=>this.updatePricingSummary(),{deep:!0}),this.handleExternalAddons()},methods:{runLoadingAnimation(){let a=i.parentElement;a.style.height=a.offsetHeight+"px",setTimeout(()=>{a.classList.remove("vx-loading");var t=i.offsetHeight,e=getComputedStyle(a);t+=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)+parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),a.style.height=t+"px",setTimeout(()=>a.style.height=null,250)},150)},currencyFormat(t){return Voxel.helpers.currencyFormat(t)},getFieldRef(t){return this.$refs["field:"+t]?.[0]},_getBasePriceSummary(){var t=this.config.props.base_price;if(!t.enabled)return null;let e=null!==t.discount_amount?t.discount_amount:t.amount;return{hidden:!0,label:"Price",amount:e="regular"===this.config.settings.product_mode&&(t=this.$root.config.props.today.date,null!==(t=this.getCustomPriceForDate(new Date(t+"T00:00:00Z"))))?null!==t.prices.base_price.discount_amount?t.prices.base_price.discount_amount:t.prices.base_price.amount:e}},_getQuantity(){return this.config.props.fields["form-quantity"]&&1<this.config.value.stock.quantity?this.config.value.stock.quantity:1},updatePricingSummary(){var t,e,a,i,s=(t,e=1)=>{let a=0;t.forEach(t=>{t.amount&&(a+=t.amount)}),a*=e,this.pricing_summary.items=t,this.pricing_summary.visible_items=t.filter(t=>!t.hidden),this.pricing_summary.total_amount=a},n=this.config.settings.product_mode;"regular"===n?(e=[],t=this._getBasePriceSummary(),i=this.getFieldRef("form-addons")?.getPricingSummary()||null,a=this._getQuantity(),null!==t&&(t.hidden=null===i||!i.length,e.push(t)),null!==i&&e.push(...i),1<a&&e.push({label:this.config.l10n.quantity,value:a}),s(e,a)):"variable"===n?(t=[],null!==(i=this.getFieldRef("form-variations")?.getPricingSummary()||null)&&(t.push(i),1<i.quantity)&&t.push({label:this.config.l10n.quantity,value:i.quantity}),s(t)):"booking"===n?(e=[],a=this.getFieldRef("form-booking")?.getPricingSummary()||null,i=this.getFieldRef("form-addons")?.getPricingSummary()||null,null!==a&&(a.hidden=0===a.amount,e.push(a),null!==i)&&e.push(...i),s(e)):s([])},showAddedToCartAlert(){var t=[];document.querySelector(".ts-popup-cart > a")&&t.push({label:this.config.l10n.view_cart,link:"#",onClick:t=>{t.preventDefault(),Voxel.openCart(),t.target.closest(".ts-notice").querySelector(".close-alert").click()}}),Voxel.alert(this.config.l10n.added_to_cart,"success",t,4e3)},addToCart(){this.processing=!0,Voxel_Config.is_logged_in?jQuery.post(Voxel_Config.ajax_url+"&action=products.add_to_cart&_wpnonce="+this.config.settings.cart_nonce,{item:JSON.stringify(this.config.value)}).always(t=>{this.processing=!1,t.success?(jQuery(document).trigger("voxel:added_cart_item",t.item),this.showAddedToCartAlert()):Voxel.alert(t.message||Voxel_Config.l10n.ajaxError,"error")}):jQuery.post(Voxel_Config.ajax_url+"&action=products.add_to_guest_cart&_wpnonce="+this.config.settings.cart_nonce,{item:JSON.stringify(this.config.value),guest_cart:localStorage.getItem("voxel:guest_cart")}).always(t=>{this.processing=!1,t.success?(localStorage.setItem("voxel:guest_cart",JSON.stringify(t.guest_cart)),this.showAddedToCartAlert(),jQuery(document).trigger("voxel:added_cart_item",t.item)):Voxel.alert(t.message||Voxel_Config.l10n.ajaxError,"error")})},directCart(){this.processing=!0,jQuery.post(Voxel_Config.ajax_url+"&action=products.get_direct_cart&_wpnonce="+this.config.settings.cart_nonce,{item:JSON.stringify(this.config.value)}).always(t=>{this.processing=!1,t.success?(localStorage.setItem("voxel:direct_cart",JSON.stringify({[t.item.key]:t.item.value})),window.location.href=t.checkout_link):Voxel.alert(t.message||Voxel_Config.l10n.ajaxError,"error")})},getMinimumPriceForDate(t=null){return(!this.config.props.custom_prices.enabled||null===t||null===(t=this.getCustomPriceForDate(t))?this.config.props:t).minimum_price},getCustomPriceForDate(n){var t;return this.config.props.custom_prices.enabled&&void 0!==(t=this.config.props.custom_prices.list.find(t=>{for(var e of t.conditions)if("date"===e.type){if(e.date===Voxel.helpers.dateFormatYmd(n))return!0}else if("date_range"===e.type){var a=new Date(e.range.from+"T00:00:00Z"),i=new Date(e.range.to+"T00:00:00Z"),s=new Date(Voxel.helpers.dateFormatYmd(n)+"T00:00:00Z");if(a<=s&&s<=i)return!0}else if("day_of_week"===e.type){a=new Date(Voxel.helpers.dateFormatYmd(n)+"T00:00:00Z");if(e.days.includes(["sun","mon","tue","wed","thu","fri","sat"][a.getDay()]))return!0}return!1}))?t:null},handleExternalAddons(){jQuery(".ts-use-addition").each((t,r)=>{try{let i=JSON.parse(atob(r.dataset.id));var l=this.config.props.fields["form-addons"]?.props.addons[i.addon]||null;let s=l?.props.choices[i.choice]||null,n=this.config.value.addons?.[i.addon]||null,o=this.$refs["field:form-addons"]?.[0]?.$refs["addon:"+i.addon]?.[0]||null;if(null!==l&&null!==s&&null!==n&&null!==o){let t=r.parentElement,e=t.dataset.tooltipDefault||null,a=t.dataset.tooltipActive||null;l._has_external_handler=!0,"custom-multiselect"===l.type?(this.$watch(()=>n.selected.length,()=>{n.selected.find(t=>t.item===i.choice)?(r.classList.add("active"),a?t.dataset.tooltip=a:delete t.dataset.tooltip):(r.classList.remove("active"),e?t.dataset.tooltip=e:delete t.dataset.tooltip)}),r.addEventListener("click",t=>{t.preventDefault();t=n.selected.findIndex(t=>t.item===i.choice);-1===t?(n.selected.push({item:i.choice,quantity:s.quantity.min}),s.quantity.enabled&&(this.externalChoice.active=!0,this.externalChoice.el=r,this.externalChoice.choice=s,this.externalChoice.ref=o)):n.selected.splice(t,1)})):"custom-select"===l.type&&(this.$watch(()=>n.selected.item,()=>{n.selected.item===i.choice?(r.classList.add("active"),a?t.dataset.tooltip=a:delete t.dataset.tooltip):(r.classList.remove("active"),e?t.dataset.tooltip=e:delete t.dataset.tooltip)},{immediate:!0}),r.addEventListener("click",t=>{t.preventDefault(),n.selected.item!==i.choice?(n.selected.item=i.choice,n.selected.quantity=s.quantity.min,s.quantity.enabled&&(this.externalChoice.active=!0,this.externalChoice.el=r,this.externalChoice.choice=s,this.externalChoice.ref=o)):n.selected.item=null}))}}catch(t){}})},_setSearchContext(){let i=this.config.settings.search_context_config,s={availability:{start:null,end:null},numeric_addons:{},switcher_addons:{}};var t,e,n=t=>!("string"!=typeof t||!t.match(/^\d{4}-\d{2}-\d{2}$/))&&isFinite(new Date(t));try{let a=new URL(document.referrer).searchParams;null!==i.availability&&"string"==typeof(t=a.get(i.availability))&&n((e=t.split(".."))[0])&&(s.availability.start=e[0],s.availability.end=n(e[1])?e[1]:e[0]),null!==i.numeric_addons&&Object.keys(i.numeric_addons).forEach(t=>{var e=a.get(i.numeric_addons[t]);"string"==typeof e&&(e=parseInt(e,10),isNaN(e)||(s.numeric_addons[t]=e))}),null!==i.switcher_addons&&Object.keys(i.switcher_addons).forEach(t=>{"1"===a.get(i.switcher_addons[t])&&(s.switcher_addons[t]=!0)})}catch(t){}this.config.settings.search_context=s}}})).component("field-form-addons",o),e.component("field-form-quantity",r),e.component("field-form-variations",l),e.component("field-form-booking",d),e.component("field-form-data-inputs",u),e.component("form-popup",Voxel.components.popup),e.component("form-group",Voxel.components.formGroup),e.mount(t))})},window.render_product_form(),jQuery(document).on("voxel:markup-update",window.render_product_form)});
